
<div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="h4">Category Master</h2>

        <div class="col-xxl-2 col-xl-2 col-lg-3 col-md-3 col-sm-4">
            
        </div>
    </div>

    <div class="row">
        <div class="col-lg-6 col-md-12 mb-4">
            <div class="card shadow-sm">
                <div class="card-body p-0"  id="categoryList">
                    
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-md-12">
            <div class="card shadow-sm">
                <div class="card-body p-0" id="propertyDT">
                    

                    
                </div>
            </div>
        </div>

    </div>
</div>

@section Scripts{
    <script>
        //categoryTable
        $(document).ready(function () {
            categoryList();

            $('#categoryList').on('click', '.show-property', function (e) {
                debugger;
                e.preventDefault();

                const categoryId = $(this).data('category-id');
                const type = $(this).data('type'); // "styles" or "collections"

                if (!categoryId || !type) {
                    console.warn('Missing category ID or type.');
                    return;
                }

                $.ajax({
                    url: '@Url.Action("StyleAndCollectionList", "Category")',
                    method: 'GET',
                    data: { categoryId: categoryId, type: type },
                    success: function (data) {
                        $('#propertyDT').empty().html(data); // Replace or update your target container
                    },
                    error: function (xhr, status, error) {
                        console.error('Failed to load property items:', error);
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops!',
                            text: 'Something went wrong while loading the data.'
                        });
                    }
                });
            });

            $('.setProgram').on('change', function () {
                debugger;
                var $parent = $(this).closest('td');
                var value = $(this).val();

                $parent.find('.style-details, .collection-list').hide();

                if (value === 'Styles') {
                    $parent.find('.style-details').show();
                } else if (value === 'Collection') {
                    $parent.find('.collection-list').show();
                }
            });

        function categoryList()
        {
            debugger;
            $.ajax({
                url: '@Url.Action("CategoryList", "Category")',
                type: 'GET',
                success: function (result)
                {
                    debugger;
                    $('#categoryList').html("");
                    $('#categoryList').html(result);
                },
                error: function (xhr, status, error)
                {
                    console.error('Error loading category list:', error);
                }
            });
        }
        });

    </script>
}