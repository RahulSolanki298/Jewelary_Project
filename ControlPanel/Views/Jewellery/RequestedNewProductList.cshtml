@model IEnumerable<ProductMasterDTO>
@using Common;
@using Models;
@{
    string defaultImage = string.Empty;
    var ringCount = Model
            .GroupBy(p => p.CategoryId)
            .Select(g => g.Count())
            .Sum();
}
@*<style>
        .card-deck {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            gap: 5px; /* Optional: space between images */
            max-width: 250px; /* Limit width, allow scrolling */
        }

            .card-deck .card {
                flex: 0 0 auto;
                border: none;
                background: transparent;
                padding: 0;
            }

            .card-deck img.card-img-top {
                height: 60px; /* Keep height small */
                width: auto;
                object-fit: contain;
                border: 1px solid #ccc;
                border-radius: 4px;
            }

        .image-row {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            gap: 5px;
            max-width: 500px; /* Adjust as needed */
        }

        .thumb-img {
            height: 60px;
            width: auto;
            object-fit: contain;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    </style>*@


<section class="section">
    <div class="row">
        <div class="col-lg-12">
            <div class="col-lg-8">
                <h4> <b>Product Verification and Validation (Active | Deactive | Hold)</b></h4>
            </div>
            <div class="col-lg-4">
                <div class="btn-group dropup float-end">
                    <a class="" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-three-dots-vertical"></i>
                    </a>
                    <input type="hidden" id="txtProductIds" />

                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" data-status="Activated">Activated</a></li>
                        <li><a class="dropdown-item" href="#" data-status="Deactivated">Deactivated</a></li>
                        <li><a class="dropdown-item" href="#" data-status="Hold">Hold</a></li>
                    </ul>

                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <div class="row mb-2">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="rings-tab" data-bs-toggle="tab" href="#ringList" role="tab" aria-controls="ringList" aria-selected="true">
                                Rings <span class="badge badge-light bg-dark ml-2 ringcount">
                                    @ringCount
                                </span>
                            </a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="bands-tab" data-bs-toggle="tab" href="#bandList" role="tab" aria-controls="bandList" aria-selected="false">Bands <span class="badge badge-light bg-dark ml-2 ringcount">0</span></a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="earrings-tab" data-bs-toggle="tab" href="#earringList" role="tab" aria-controls="earringList" aria-selected="false">Earrings <span class="badge badge-light bg-dark ml-2 ringcount">0</span></a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="pendant-tab" data-bs-toggle="tab" tabindex="-1" href="#pendantList" role="tab" aria-controls="pandantList" aria-disabled="false">Pendant <span class="badge badge-light bg-dark ml-2 ringcount"></span></a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="bracelets-tab" data-bs-toggle="tab" tabindex="-1" href="#braceletsList" role="tab" aria-controls="braceletList" aria-disabled="false">Bracelet <span class="badge badge-light bg-dark ml-2 ringcount"></span></a>
                        </li>
                    </ul>
                </div>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="ringList" role="tabpanel" aria-labelledby="rings-tab">
                        <table class="table table-hover table-bordered mb-0 table-responsive" id="ringTable">
                            <thead>
                                <tr>
                                    <th scope="col"><input type="checkbox" class="chkId" id="chkRingsIds" /></th>
                                    <th scope="col">Images</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Title</th>
                                    <th scope="col">Vender</th>
                                    <th scope="col">Style</th>
                                    <th scope="col">Metal(Color)</th>
                                    <th scope="col">Diameter</th>
                                    <th scope="col">Length</th>
                                    <th scope="col">Band.Width</th>
                                    <th scope="col">Weight</th>
                                    <th scope="col">CTW</th>
                                    <th scope="col">Center.Shape</th>
                                    <th scope="col">Center.Carat</th>
                                    <th scope="col">Certification</th>
                                    <th scope="col">Karat</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Wholesale.Cost</th>
                                    <th scope="col">Accent.Stone.Shape</th>
                                    <th scope="col">MM.Size</th>
                                    <th scope="col">Dia.Wt</th>
                                    <th scope="col">No.Of.Stones</th>
                                    <th scope="col">Grades</th>
                                    <th scope="col">User</th>
                                    <th scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model != null)
                                {

                                    @foreach (var item in Model.Where(x => x.CategoryName == SD.Rings))
                                    {
                                        var product = item.ProductItems.Where(x => x.ProductKey == item.ProductKey).FirstOrDefault();

                                        <tr>
                                            <td scope="col">
                                                <input type="checkbox" class="chkId" value="@item.Id" />
                                            </td>
                                            <td scope="col">
                                                <div class="image-row">
                                                    @if (item.ProductImageVideos != null && item.ProductImageVideos.Count > 0)
                                                    {
                                                        foreach (var imgVdo in item.ProductImageVideos)
                                                        {
                                                            if (!string.IsNullOrEmpty(imgVdo.ImageUrl) && imgVdo.ImageUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/@imgVdo.ImageUrl" alt="Image" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else if (!string.IsNullOrEmpty(imgVdo.VideoUrl) && imgVdo.VideoUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/assets/img/video-icon.svg" alt="Video" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else
                                                            {
                                                                <a>
                                                                    <img src="@SD.ImgUrl/assets/img/no-image.png" alt="No image" class="thumb-img" />
                                                                </a>
                                                            }
                                                        }
                                                    }
                                                </div>
                                            </td>

                                            <td scope="col">@product.UploadStatus</td>
                                            <td scope="col">
                                                <h5>@product.Title</h5>
                                                <textarea asp-for="@product.Description" disabled name="Description" class="product-input form-control" rows="3" style="width:250px;"></textarea>
                                            </td>
                                            <td scope="col">@product.VenderName</td>
                                            <td scope="col">@product.Sku</td>
                                            <td scope="col">@product.ColorName</td>
                                            <td scope="col">@product.Diameter</td>
                                            <td scope="col">@product.Length</td>
                                            <td scope="col">@product.BandWidth</td>
                                            <td scope="col">@product.GoldWeight</td>
                                            <td scope="col">@product.CTW</td>
                                            <td scope="col">@product.CenterShapeName</td>
                                            <td scope="col">@product.CenterCaratName</td>
                                            <td scope="col">@product.Certificate</td>
                                            <td scope="col">@product.Karat</td>
                                            <td scope="col">@product.Price</td>
                                            <td scope="col">@product.WholesaleCost</td>
                                            <td scope="col">@product.AccentStoneShapeName</td>
                                            <td scope="col">@product.MMSize</td>
                                            <td scope="col">@product.DiaWT</td>
                                            <td scope="col">@product.NoOfStones</td>
                                            <td scope="col">@product.Grades</td>
                                            <td scope="col">@product.UpdatedPersonName</td>
                                            <td scope="col">@product.DisplayDate</td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="25"> No data found</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="bandList" role="tabpanel" aria-labelledby="bands-tab">
                        <table class="table table-hover table-bordered mb-0 table-responsive" id="bandTable">
                            <thead>
                                <tr>
                                    <th scope="col"><input type="checkbox" class="chkId" id="chkBandIds" /></th>
                                    <th scope="col">Images</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Title</th>
                                    <th scope="col">Vender</th>
                                    <th scope="col">Style</th>
                                    <th scope="col">Metal(Color)</th>
                                    <th scope="col">Diameter</th>
                                    <th scope="col">Length</th>
                                    <th scope="col">Band.Width</th>
                                    <th scope="col">Weight</th>
                                    <th scope="col">CTW</th>
                                    <th scope="col">Center.Shape</th>
                                    <th scope="col">Center.Carat</th>
                                    <th scope="col">Certification</th>
                                    <th scope="col">Karat</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Wholesale.Cost</th>
                                    <th scope="col">Accent.Stone.Shape</th>
                                    <th scope="col">MM.Size</th>
                                    <th scope="col">Dia.Wt</th>
                                    <th scope="col">No.Of.Stones</th>
                                    <th scope="col">Grades</th>
                                    <th scope="col">User</th>
                                    <th scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model != null)
                                {

                                    @foreach (var item in Model.Where(x => x.CategoryName == SD.Bands))
                                    {
                                        var product = item.ProductItems.Where(x => x.ProductKey == item.ProductKey).FirstOrDefault();

                                        <tr>
                                            <td scope="col">
                                                <input type="checkbox" class="chkId" value="@item.Id" />
                                            </td>
                                            <td scope="col">
                                                <div class="image-row">
                                                    @if (product.ProductImageVideos != null && product.ProductImageVideos.Count > 0)
                                                    {
                                                        foreach (var imgVdo in product.ProductImageVideos)
                                                        {
                                                            if (!string.IsNullOrEmpty(imgVdo.ImageUrl) && imgVdo.ImageUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/@imgVdo.ImageUrl" alt="Image" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else if (!string.IsNullOrEmpty(imgVdo.VideoUrl) && imgVdo.VideoUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/assets/img/video-icon.svg" alt="Video" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else
                                                            {
                                                                <a>
                                                                    <img src="@SD.ImgUrl/assets/img/no-image.png" alt="No image" class="thumb-img" />
                                                                </a>
                                                            }
                                                        }
                                                    }
                                                </div>
                                            </td>

                                            <td scope="col">@product.UploadStatus</td>
                                            <td scope="col">
                                                <h5>@product.Title</h5>
                                                <textarea asp-for="@product.Description" disabled name="Description" class="product-input form-control" rows="3" style="width:250px;"></textarea>
                                            </td>
                                            <td scope="col">@product.VenderName</td>
                                            <td scope="col">@product.Sku</td>
                                            <td scope="col">@product.ColorName</td>
                                            <td scope="col">@product.Diameter</td>
                                            <td scope="col">@product.Length</td>
                                            <td scope="col">@product.BandWidth</td>
                                            <td scope="col">@product.GoldWeight</td>
                                            <td scope="col">@product.CTW</td>
                                            <td scope="col">@product.CenterShapeName</td>
                                            <td scope="col">@product.CenterCaratName</td>
                                            <td scope="col">@product.Certificate</td>
                                            <td scope="col">@product.Karat</td>
                                            <td scope="col">@product.Price</td>
                                            <td scope="col">@product.WholesaleCost</td>
                                            <td scope="col">@product.AccentStoneShapeName</td>
                                            <td scope="col">@product.MMSize</td>
                                            <td scope="col">@product.DiaWT</td>
                                            <td scope="col">@product.NoOfStones</td>
                                            <td scope="col">@product.Grades</td>
                                            <td scope="col">@product.UpdatedPersonName</td>
                                            <td scope="col">@product.DisplayDate</td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="25"> No data found</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="earringList" role="tabpanel" aria-labelledby="earrings-tab">
                        <table class="table table-hover table-bordered mb-0 table-responsive" id="EarringTable">
                            <thead>
                                <tr>
                                    <th scope="col"><input type="checkbox" class="chkId" id="chkEarringIds" /></th>
                                    <th scope="col">Images</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Title</th>
                                    <th scope="col">Vender</th>
                                    <th scope="col">Style</th>
                                    <th scope="col">Metal(Color)</th>
                                    <th scope="col">Diameter</th>
                                    <th scope="col">Length</th>
                                    <th scope="col">Band.Width</th>
                                    <th scope="col">Weight</th>
                                    <th scope="col">CTW</th>
                                    <th scope="col">Center.Shape</th>
                                    <th scope="col">Center.Carat</th>
                                    <th scope="col">Certification</th>
                                    <th scope="col">Karat</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Wholesale.Cost</th>
                                    <th scope="col">Accent.Stone.Shape</th>
                                    <th scope="col">MM.Size</th>
                                    <th scope="col">Dia.Wt</th>
                                    <th scope="col">No.Of.Stones</th>
                                    <th scope="col">Grades</th>
                                    <th scope="col">User</th>
                                    <th scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model != null)
                                {

                                    @foreach (var item in Model.Where(x => x.CategoryName == SD.Earrings))
                                    {
                                        var product = item.ProductItems.Where(x => x.ProductKey == item.ProductKey).FirstOrDefault();

                                        <tr>
                                            <td scope="col">
                                                <input type="checkbox" class="chkId" value="@item.Id" />
                                            </td>
                                            <td scope="col">
                                                <div class="image-row">
                                                    @if (product.ProductImageVideos != null && product.ProductImageVideos.Count > 0)
                                                    {
                                                        foreach (var imgVdo in product.ProductImageVideos)
                                                        {
                                                            if (!string.IsNullOrEmpty(imgVdo.ImageUrl) && imgVdo.ImageUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/@imgVdo.ImageUrl" alt="Image" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else if (!string.IsNullOrEmpty(imgVdo.VideoUrl) && imgVdo.VideoUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/assets/img/video-icon.svg" alt="Video" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else
                                                            {
                                                                <a>
                                                                    <img src="@SD.ImgUrl/assets/img/no-image.png" alt="No image" class="thumb-img" />
                                                                </a>
                                                            }
                                                        }
                                                    }
                                                </div>
                                            </td>

                                            <td scope="col">@product.UploadStatus</td>
                                            <td scope="col">
                                                <h5>@product.Title</h5>
                                                <textarea asp-for="@product.Description" disabled name="Description" class="product-input form-control" rows="3" style="width:250px;"></textarea>
                                            </td>
                                            <td scope="col">@product.VenderName</td>
                                            <td scope="col">@product.Sku</td>
                                            <td scope="col">@product.ColorName</td>
                                            <td scope="col">@product.Diameter</td>
                                            <td scope="col">@product.Length</td>
                                            <td scope="col">@product.BandWidth</td>
                                            <td scope="col">@product.GoldWeight</td>
                                            <td scope="col">@product.CTW</td>
                                            <td scope="col">@product.CenterShapeName</td>
                                            <td scope="col">@product.CenterCaratName</td>
                                            <td scope="col">@product.Certificate</td>
                                            <td scope="col">@product.Karat</td>
                                            <td scope="col">@product.Price</td>
                                            <td scope="col">@product.WholesaleCost</td>
                                            <td scope="col">@product.AccentStoneShapeName</td>
                                            <td scope="col">@product.MMSize</td>
                                            <td scope="col">@product.DiaWT</td>
                                            <td scope="col">@product.NoOfStones</td>
                                            <td scope="col">@product.Grades</td>
                                            <td scope="col">@product.UpdatedPersonName</td>
                                            <td scope="col">@product.DisplayDate</td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="25"> No data found</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="pendantList" role="tabpanel" aria-labelledby="pandant-tab">
                        <table class="table table-hover table-bordered mb-0 table-responsive" id="PendantTable">
                            <thead>
                                <tr>
                                    <th scope="col"><input type="checkbox" class="chkId" id="chkPendantIds" /></th>
                                    <th scope="col">Images</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Title</th>
                                    <th scope="col">Vender</th>
                                    <th scope="col">Style</th>
                                    <th scope="col">Metal(Color)</th>
                                    <th scope="col">Diameter</th>
                                    <th scope="col">Length</th>
                                    <th scope="col">Band.Width</th>
                                    <th scope="col">Weight</th>
                                    <th scope="col">CTW</th>
                                    <th scope="col">Center.Shape</th>
                                    <th scope="col">Center.Carat</th>
                                    <th scope="col">Certification</th>
                                    <th scope="col">Karat</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Wholesale.Cost</th>
                                    <th scope="col">Accent.Stone.Shape</th>
                                    <th scope="col">MM.Size</th>
                                    <th scope="col">Dia.Wt</th>
                                    <th scope="col">No.Of.Stones</th>
                                    <th scope="col">Grades</th>
                                    <th scope="col">User</th>
                                    <th scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model != null)
                                {

                                    @foreach (var item in Model.Where(x => x.CategoryName == SD.Pendants))
                                    {
                                        var product = item.ProductItems.Where(x => x.ProductKey == item.ProductKey).FirstOrDefault();

                                        <tr>
                                            <td scope="col">
                                                <input type="checkbox" class="chkId" value="@item.Id" />
                                            </td>
                                            <td scope="col">
                                                <div class="image-row">
                                                    @if (product.ProductImageVideos != null && product.ProductImageVideos.Count > 0)
                                                    {
                                                        foreach (var imgVdo in product.ProductImageVideos)
                                                        {
                                                            if (!string.IsNullOrEmpty(imgVdo.ImageUrl) && imgVdo.ImageUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/@imgVdo.ImageUrl" alt="Image" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else if (!string.IsNullOrEmpty(imgVdo.VideoUrl) && imgVdo.VideoUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/assets/img/video-icon.svg" alt="Video" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else
                                                            {
                                                                <a>
                                                                    <img src="@SD.ImgUrl/assets/img/no-image.png" alt="No image" class="thumb-img" />
                                                                </a>
                                                            }
                                                        }
                                                    }
                                                </div>
                                            </td>

                                            <td scope="col">@product.UploadStatus</td>
                                            <td scope="col">
                                                <h5>@product.Title</h5>
                                                <textarea asp-for="@product.Description" disabled name="Description" class="product-input form-control" rows="3" style="width:250px;"></textarea>
                                            </td>
                                            <td scope="col">@product.VenderName</td>
                                            <td scope="col">@product.Sku</td>
                                            <td scope="col">@product.ColorName</td>
                                            <td scope="col">@product.Diameter</td>
                                            <td scope="col">@product.Length</td>
                                            <td scope="col">@product.BandWidth</td>
                                            <td scope="col">@product.GoldWeight</td>
                                            <td scope="col">@product.CTW</td>
                                            <td scope="col">@product.CenterShapeName</td>
                                            <td scope="col">@product.CenterCaratName</td>
                                            <td scope="col">@product.Certificate</td>
                                            <td scope="col">@product.Karat</td>
                                            <td scope="col">@product.Price</td>
                                            <td scope="col">@product.WholesaleCost</td>
                                            <td scope="col">@product.AccentStoneShapeName</td>
                                            <td scope="col">@product.MMSize</td>
                                            <td scope="col">@product.DiaWT</td>
                                            <td scope="col">@product.NoOfStones</td>
                                            <td scope="col">@product.Grades</td>
                                            <td scope="col">@product.UpdatedPersonName</td>
                                            <td scope="col">@product.DisplayDate</td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="25"> No data found</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="braceletsList" role="tabpanel" aria-labelledby="bracelets-tab">
                        <table class="table table-hover table-bordered mb-0 table-responsive" id="BraceletsTable">
                            <thead>
                                <tr>
                                    <th scope="col"><input type="checkbox" class="chkId" id="chkBraceletIds" /></th>
                                    <th scope="col">Images</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Title</th>
                                    <th scope="col">Vender</th>
                                    <th scope="col">Style</th>
                                    <th scope="col">Metal(Color)</th>
                                    <th scope="col">Diameter</th>
                                    <th scope="col">Length</th>
                                    <th scope="col">Band.Width</th>
                                    <th scope="col">Weight</th>
                                    <th scope="col">CTW</th>
                                    <th scope="col">Center.Shape</th>
                                    <th scope="col">Center.Carat</th>
                                    <th scope="col">Certification</th>
                                    <th scope="col">Karat</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Wholesale.Cost</th>
                                    <th scope="col">Accent.Stone.Shape</th>
                                    <th scope="col">MM.Size</th>
                                    <th scope="col">Dia.Wt</th>
                                    <th scope="col">No.Of.Stones</th>
                                    <th scope="col">Grades</th>
                                    <th scope="col">User</th>
                                    <th scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model != null)
                                {

                                    @foreach (var item in Model.Where(x => x.CategoryName == SD.Bracelets))
                                    {
                                        var product = item.ProductItems.Where(x => x.ProductKey == item.ProductKey).FirstOrDefault();

                                        <tr>
                                            <td scope="col">
                                                <input type="checkbox" class="chkId" value="@item.Id" />
                                            </td>
                                            <td scope="col">
                                                <div class="image-row">
                                                    @if (product.ProductImageVideos != null && product.ProductImageVideos.Count > 0)
                                                    {
                                                        foreach (var imgVdo in product.ProductImageVideos)
                                                        {
                                                            if (!string.IsNullOrEmpty(imgVdo.ImageUrl) && imgVdo.ImageUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/@imgVdo.ImageUrl" alt="Image" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else if (!string.IsNullOrEmpty(imgVdo.VideoUrl) && imgVdo.VideoUrl != "-")
                                                            {
                                                                <a class="showImgs" data-productKey="@item.ProductKey">
                                                                    <img src="@SD.ImgUrl/assets/img/video-icon.svg" alt="Video" class="thumb-img" />
                                                                </a>
                                                            }
                                                            else
                                                            {
                                                                <a>
                                                                    <img src="@SD.ImgUrl/assets/img/no-image.png" alt="No image" class="thumb-img" />
                                                                </a>
                                                            }
                                                        }
                                                    }
                                                </div>
                                            </td>

                                            <td scope="col">@product.UploadStatus</td>
                                            <td scope="col">
                                                <h5>@product.Title</h5>
                                                <textarea asp-for="@product.Description" disabled name="Description" class="product-input form-control" rows="3" style="width:250px;"></textarea>
                                            </td>
                                            <td scope="col">@product.VenderName</td>
                                            <td scope="col">@product.Sku</td>
                                            <td scope="col">@product.ColorName</td>
                                            <td scope="col">@product.Diameter</td>
                                            <td scope="col">@product.Length</td>
                                            <td scope="col">@product.BandWidth</td>
                                            <td scope="col">@product.GoldWeight</td>
                                            <td scope="col">@product.CTW</td>
                                            <td scope="col">@product.CenterShapeName</td>
                                            <td scope="col">@product.CenterCaratName</td>
                                            <td scope="col">@product.Certificate</td>
                                            <td scope="col">@product.Karat</td>
                                            <td scope="col">@product.Price</td>
                                            <td scope="col">@product.WholesaleCost</td>
                                            <td scope="col">@product.AccentStoneShapeName</td>
                                            <td scope="col">@product.MMSize</td>
                                            <td scope="col">@product.DiaWT</td>
                                            <td scope="col">@product.NoOfStones</td>
                                            <td scope="col">@product.Grades</td>
                                            <td scope="col">@product.UpdatedPersonName</td>
                                            <td scope="col">@product.DisplayDate</td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="25"> No data found</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>




<div class="modal fade" id="modalImages" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">

</div>




@section Scripts {
    <script>
                $(document).ready(function () {

            // Generalized Checkbox Logic
            const checkboxConfig = [
                {
                    selectAllId: '#chkRingsIds',
                    tableId: '#ringTable',
                    updateFn: updateRingSelectedIds
                },
                {
                    selectAllId: '#chkBandIds',
                    tableId: '#bandTable',
                    updateFn: updateBandSelectedIds
                },
                {
                    selectAllId: '#chkEarringIds',
                    tableId: '#EarringTable',
                    updateFn: updateEarringSelectedIds
                },
                {
                    selectAllId: '#chkPendantIds',
                    tableId: '#PendantTable',
                    updateFn: updatePendantSelectedIds
                },
                {
                    selectAllId: '#chkBraceletIds',
                    tableId: '#BraceletsTable',
                    updateFn: updateBraceletsSelectedIds
                }
            ];

            checkboxConfig.forEach(({ selectAllId, tableId, updateFn }) => {
                // 'Select All' Checkbox
                $(selectAllId).on('change', function () {
                    const isChecked = $(this).is(':checked');
                    $(`${tableId} .chkId`).not(this).prop('checked', isChecked);
                    updateFn();
                });

                // Individual Checkbox Change
                $(tableId).on('change', '.chkId', function () {
                    const allChecked = $(`${tableId} .chkId`).length === $(`${tableId} .chkId:checked`).length;
                    $(selectAllId).prop('checked', allChecked);
                    updateFn();
                });
            });

            // Status Update Button Click
                    $(document).ready(function () {
                        $('.dropdown-item').on('click', function (e) {
                            debugger;
                            e.preventDefault();

                            const newStatus = $(this).data('status');
                            const selectedProductIds = $('#txtProductIds').val();

                            if (!selectedProductIds) {
                                Swal.fire({
                                    icon: 'warning',
                                    title: 'No items selected',
                                    text: 'Please select at least one product to update the status.',
                                });
                                return;
                            }

                            Swal.fire({
                                title: 'Are you sure?',
                                text: `Do Want to change status for Product? Product Status : "${newStatus}".`,
                                icon: 'question',
                                showCancelButton: true,
                                confirmButtonText: 'Yes, update it!',
                                cancelButtonText: 'Cancel'
                            }).then((result) => {
                                if (!result.isConfirmed) return;

                                const productIdArray = selectedProductIds.split(',').map(id => id.trim()).filter(Boolean);

                                if (productIdArray.length === 0) {
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Invalid IDs',
                                        text: 'Could not parse any valid product IDs.',
                                    });
                                    return;
                                }

                                $.ajax({
                                    url: '@Url.Action("ChangeStatus", "Jewellery")',
                                    method: 'POST',
                                    data: {
                                        pIds: productIdArray,
                                        status: newStatus
                                    },
                                    success: function (response) {
                                        Swal.fire({
                                            icon: 'success',
                                            title: 'Status Updated',
                                            text: `Products successfully updated to "${newStatus}".`,
                                        }).then(() => location.reload());
                                    },
                                    error: function (xhr, status, error) {
                                        Swal.fire({
                                            icon: 'error',
                                            title: 'Update Failed',
                                            text: 'An error occurred while updating the product status.',
                                        });
                                        console.error('AJAX Error:', { status, error, xhr });
                                    }
                                });
                            });
                        });
            });


            // ID Getters & Updaters
            function updateRingSelectedIds() {
                updateSelectedIds(getSelectedIds('#ringTable'));
            }

            function updateBandSelectedIds() {
                updateSelectedIds(getSelectedIds('#bandTable'));
            }

            function updateEarringSelectedIds() {
                updateSelectedIds(getSelectedIds('#EarringTable'));
            }

            function updatePendantSelectedIds() {
                updateSelectedIds(getSelectedIds('#PendantTable'));
            }

            function updateBraceletsSelectedIds() {
                updateSelectedIds(getSelectedIds('#BraceletsTable'));
            }

            function getSelectedIds(tableId) {
                let ids = [];
                $(`${tableId} .chkId:checked`).each(function () {
                    ids.push($(this).val());
                });
                return ids;
            }

            function updateSelectedIds(ids) {
                $('#txtProductIds').val(ids.join(','));
            }

            $("#modalImages").on("click", ".popupImgs", function () {
               const id = $(this).attr("id");

                $.ajax({
                    url: `@Url.Action("UpdateJewelryProductImageById", "Jewellery")?id=${id}`,
                    type: "GET",
                    success: function (data) {
                        console.log(data.imageUrl);
                       if (data.imageUrl && data.imageUrl !== "-") {
                            $("#mainImg").attr("src", '@SD.ImgUrl/' + data.imageUrl).show();
                            $("#mainVideo").hide();
                        }
                        else if (data.videoUrl && data.videoUrl !== "-") {
                            $("#videoUrl").attr("src", '@SD.ImgUrl/' + data.videoUrl);
                            $("#mainImg").hide();
                            $("#mainVideo").show()[0].load();  // reload video
                        }
                        else {
                            $("#mainImg").attr("src", "/assets/img/no-image.png").show();
                            $("#mainVideo").hide();
                        }

                    },
                    error: function (xhr, status, error) {
                        console.error("Error fetching images:", error);
                    }
                });
            });




        });

        $(document).on("click", ".showImgs", function (e) {
            const productId = $(this).attr("data-productKey");

            $.ajax({
                url: `@Url.Action("JewelryProductImages", "Jewellery")?productKey=${productId}`,
                type: "GET",
                success: function (data) {
                    // Assuming you have a modal or container to show the images
                    $("#modalImages").html(data);
                    $("#modalImages").modal("show");
                },
                error: function (xhr, status, error) {
                    console.error("Error fetching images:", error);
                }
            });
        });



    </script>
}